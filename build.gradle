apply plugin: 'groovy'
apply plugin: 'eclipse'
apply plugin: 'maven'

repositories {
	mavenCentral()
}

dependencies {
	groovy 'org.codehaus.groovy:groovy-all:2.1.0'
	testCompile 'xmlunit:xmlunit:1.3'
	testCompile 'junit:junit:4.11'
	testCompile 'org.spockframework:spock-core:0.7-groovy-2.0'
}

// MetaInfo
group = 'groovytools.builder'
version = '2.0.0-SNAPSHOT'
//default artifact name is defined in settings.gradle  

defaultTasks('build')

task wrapper(type: Wrapper) {
    gradleVersion = '1.4'
}

task writePom {
	doLast {
		pom {
		}.writeTo("build/classes/main/META-INF/maven/${project.group}/${project.name}/pom.xml")
	}
}

afterEvaluate {
	 getTasksByName('jar', false)*.dependsOn('writePom')
}